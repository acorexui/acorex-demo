<div
  class="ax-flex ax-flex-col ax-items-center ax-justify-center ax-gap-6 ax-p-6"
>
  <!-- Header -->
  <div class="ax-text-center ax-mb-4">
    <h1
      class="ax-text-3xl ax-font-bold ax-mb-2 ax-text-gray-900 dark:ax-text-gray-100"
    >
      Country Selection Showcase
    </h1>
    <p class="ax-text-gray-600 dark:ax-text-gray-400">
      Interactive demonstration of the constants package with country data
    </p>
  </div>

  <div class="ax-flex ax-gap-4 ax-flex-row-reverse">
    <!-- Selected Country Display -->
    @if (selectedCountry(); as country) {
    <div
      class="ax-w-full ax-max-w-2xl ax-bg-white dark:ax-bg-gray-800 ax-border dark:ax-darkest-surface ax-rounded-lg ax-shadow-sm"
    >
      <div class="ax-p-6">
        <!-- Header with Clear Button -->
        <div class="ax-flex ax-justify-between ax-items-start ax-mb-4">
          <div class="ax-flex ax-items-center ax-gap-4">
            @if (country.bkPosition) {
            <div
              class="ax-w-[25px] ax-h-[20px] ax-bg-repeat ax-flex-shrink-0"
              [ngStyle]="{
               'background-image': 'url(' + flagSprite + ')',
               'background-position': country.bkPosition.x + ' ' + country.bkPosition.y,
             }"
            ></div>
            }
            <div>
              <h3
                class="ax-text-xl ax-font-semibold ax-text-lightest-surface dark:ax-text-gray-100"
              >
                {{ country.name }}
              </h3>
              <p class="ax-text-sm ax-text-gray-600 dark:ax-text-gray-400">
                {{ country.code | uppercase }} â€¢ {{ country.iso2code }}
              </p>
            </div>
          </div>
          <!-- Clear Selection Button -->
          <ax-button
            (click)="clearSelection()"
            color="secondary"
            class="ax-px-6 ax-py-2 ax-text-base ax-font-medium"
            style="width: max-content"
          >
            Clear
          </ax-button>
        </div>

        <div class="ax-grid ax-grid-cols-1 md:ax-grid-cols-2 ax-gap-4">
          <!-- Phone Format -->
          <div>
            <h4
              class="ax-font-medium ax-mb-2 ax-text-gray-900 dark:ax-text-gray-100"
            >
              Phone Format
            </h4>
            <p
              class="ax-text-sm ax-bg-gray-100 dark:ax-bg-gray-700 ax-text-gray-900 dark:ax-text-gray-100 ax-p-2 ax-rounded ax-font-mono"
            >
              {{ getFormattedPhone(country) }}
            </p>
          </div>

          <!-- Area Codes -->
          @if (country.areaCodes && country.areaCodes.length > 0) {
          <div>
            <h4
              class="ax-font-medium ax-mb-2 ax-text-gray-900 dark:ax-text-gray-100"
            >
              Area Codes
            </h4>
            <p
              class="ax-text-sm ax-bg-gray-100 dark:ax-bg-gray-700 ax-text-gray-900 dark:ax-text-gray-100 ax-p-2 ax-rounded"
            >
              {{ getAreaCodes(country) }}
            </p>
          </div>
          }

          <!-- Regions -->
          <div>
            <h4
              class="ax-font-medium ax-mb-2 ax-text-gray-900 dark:ax-text-gray-100"
            >
              Regions
            </h4>
            <div class="ax-flex ax-flex-wrap ax-gap-1">
              @for (region of country.regions; track region) {
              <span
                class="ax-inline-block ax-bg-blue-100 dark:ax-bg-blue-900 ax-text-blue-800 dark:ax-text-blue-200 ax-text-xs ax-px-2 ax-py-1 ax-rounded"
              >
                {{ region }}
              </span>
              }
            </div>
          </div>

          <!-- Priority -->
          @if (country.orderPriority !== undefined) {
          <div>
            <h4
              class="ax-font-medium ax-mb-2 ax-text-gray-900 dark:ax-text-gray-100"
            >
              Priority
            </h4>
            <p
              class="ax-text-sm ax-bg-gray-100 dark:ax-bg-gray-700 ax-text-gray-900 dark:ax-text-gray-100 ax-p-2 ax-rounded"
            >
              {{ country.orderPriority }}
            </p>
          </div>

          }
        </div>
      </div>
    </div>
    }

    <!-- Countries List -->
    <div
      class="ax-w-full ax-max-w-4xl ax-bg-white dark:ax-bg-gray-800 ax-border dark:ax-darkest-surface ax-rounded-lg ax-shadow-sm"
    >
      <div class="ax-p-6">
        <div class="ax-flex ax-justify-between ax-items-center ax-mb-4">
          <h3
            class="ax-text-lg ax-font-semibold ax-text-gray-900 dark:ax-text-gray-100"
          >
            Countries ({{ displayedCountries().length }})
          </h3>
        </div>

        <div
          class="ax-max-h-96 ax-overflow-y-auto ax-border dark:ax-border-gray-700 ax-rounded"
        >
          <div class="ax-divide-y dark:ax-divide-gray-700">
            @for (country of displayedCountries(); track country.code) {
            <div
              class="ax-p-4 ax-cursor-pointer ax-hover:ax-bg-gray-50 dark:ax-hover:ax-bg-gray-700 ax-transition-colors"
              [class.ax-bg-blue-50]="selectedCountry()?.code === country.code"
              [class.dark:ax-bg-blue-900]="
                selectedCountry()?.code === country.code
              "
              (click)="selectCountry(country)"
            >
              <div class="ax-flex ax-items-center ax-gap-3">
                @if (country.bkPosition) {
                <div
                  class="ax-w-[25px] ax-h-[20px] ax-bg-repeat ax-flex-shrink-0"
                  [ngStyle]="{
                        'background-image': 'url(' + flagSprite + ')',
                        'background-position': country.bkPosition.x + ' ' + country.bkPosition.y,
                      }"
                ></div>
                } @else {
                <div
                  class="ax-w-[25px] ax-h-[20px] ax-bg-gray-200 dark:ax-bg-gray-600 ax-rounded ax-flex-shrink-0"
                ></div>
                }

                <div class="ax-flex-1">
                  <div class="ax-flex ax-items-center ax-gap-2">
                    <span
                      class="ax-font-medium ax-text-gray-900 dark:ax-text-gray-100"
                      >{{ country.name }}</span
                    >
                    @if (country.orderPriority !== undefined) {
                    <span
                      class="ax-inline-block ax-bg-green-100 dark:ax-bg-green-900 ax-text-green-800 dark:ax-text-green-200 ax-text-xs ax-px-1 ax-py-0.5 ax-rounded"
                    >
                      Priority
                    </span>
                    }
                  </div>
                  <div
                    class="ax-flex ax-items-center ax-gap-3 ax-text-sm ax-text-gray-600 dark:ax-text-gray-400"
                  >
                    <span>{{ country.code | uppercase }}</span>
                    <span>{{ country.iso2code }}</span>
                    @if (country.format) {
                    <span class="ax-font-mono">{{ country.format }}</span>
                    }
                  </div>
                  <div class="ax-flex ax-flex-wrap ax-gap-1 ax-mt-1">
                    @for (region of country.regions.slice(0, 3); track region) {
                    <span
                      class="ax-inline-block ax-bg-gray-100 dark:ax-bg-gray-700 ax-text-gray-700 dark:ax-text-gray-300 ax-text-xs ax-px-1 ax-py-0.5 ax-rounded"
                    >
                      {{ region }}
                    </span>
                    } @if (country.regions.length > 3) {
                    <span
                      class="ax-text-xs ax-text-gray-500 dark:ax-text-gray-400"
                      >+{{ country.regions.length - 3 }} more</span
                    >
                    }
                  </div>
                </div>
              </div>
            </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
